import {
  Box3,
  Object3D,
  Raycaster,
  Vector3,
  UniformsUtils,
  Color
} from 'three'
import { Body, Box, Vec3, Heightfield } from 'cannon-es'
import { fogParsVert, fogVert, fogParsFrag, fogFrag } from '@shaders/FogReplace'
import Flare from './Planet/Flare'
// import data from './height.json'
// import Map from '@textures/heightfield.png'

export default class Floor {
  constructor(options) {
    // Set options
    this.physic = options.physic
    this.assets = options.assets
    this.params = options.params
    this.time = options.time

    this.terrainShader

    // Set up
    this.container = new Object3D()
    this.container.name = "map"
    this.data = [[0,7.168648141643711,7.140239207156554,7.111830272669397,7.077200921665008,7.0393937610255355,6.9732206481458165,6.891156435046073,6.777520123550354,6.645017774189186,6.503197139995765,6.351682058001473,6.196930807918783,6.035946185376313,5.721146878091405,5.3315108979738675,4.782268152197468,4.20690178850208,3.5830832086036764,2.9908603824232647,2.416893182490821,2.0096961845510024,1.701136956223605,1.5688117508697497,1.6003601001396404,1.710812133022215,2.0233119179422534,2.38768399715431,2.841370282617235,3.3155879391193532,3.7966772289647555,4.231460005665794,4.617124448210761,4.920154620889573,5.081983557693575,5.17631044837028,5.07234089972743,4.892457512667728,4.589427061905599,4.191128360105903,3.752929639832357,3.2708880554476765,2.7995676995881955,2.3450225122632995,1.9941945772014422,1.695005780981962,1.5908390904175,1.2338577003002984,0.4952218515523277,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.2398783901548525,6.251054432504891,6.3033988415652455,6.335764869299476,6.330127252231026,6.363473033099315,6.307759503170464,6.25050395232644,6.157598525998271,6.030776476649521,5.888305374774796,5.719915697629041,5.535348152934452,5.163621527763325,4.742844574882271,4.086931407305179,3.4621925063770442,2.76552110571603,2.0755965130792124,1.4586677670047798,0.9129851207459578,0.5662498811043633,0.3587470837245299,0.45571453165955367,0.5929180404303585,1.0237782924307697,1.4242914956573804,1.9400149576374783,2.4797009270243815,3.0002022820385803,3.5098001077828864,3.918640118744263,4.253577550273387,4.43553063211879,4.536744021431654,4.4056766367661755,4.200045889484538,3.8677028743763744,3.4130749189376846,2.9474762643751307,2.370510139198279,1.8526101588182746,1.344710432264791,0.9092134163273211,0.5701954818034212,0.37109742386331157,0.3056404406225912,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.367216221720391,6.488835671785576,6.584187661716595,6.693691428798283,6.759186560214904,6.82358399232001,6.871167890841958,6.841999772352183,6.801367321560306,6.715052645538225,6.5895740813565284,6.42152311355726,6.22152297511932,5.8188317352458885,5.341513073979923,4.6565075921813746,3.930213206343198,3.183217962040688,2.4311218833717825,1.719086156818923,1.1416201536977142,0.676687432115054,0.4239667760816752,0.49957760643396454,0.7003789606378967,1.1543458985595418,1.6510817844642747,2.206828599975849,2.804693576504883,3.3911880813397497,3.9243421120072632,4.401633648863206,4.7620536878581,4.970214405050507,5.090269244056006,4.9518274144144465,4.710536976624724,4.349318568931403,3.8555280558554834,3.3322361724648153,2.7297629411406708,2.1344377417572646,1.5784386599513316,1.0928619455634792,0.6716268664774849,0.4453589234083781,0.31192735469802124,0.30249339944139275,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.322966888025649,6.488078027562003,6.686944586146723,6.8324126561846255,6.968460934819791,7.090883143979983,7.168785336560858,7.242818764355144,7.233132829771782,7.202789506571032,7.116474987644715,6.964621929830721,6.746332144247948,6.320679198551627,5.8067686025929985,5.06620966718225,4.31232491236279,3.4764743407015177,2.690101303962631,1.9266028273518347,1.28789540895999,0.7960142747445607,0.4713153108982777,0.5636515157163726,0.7941307004244054,1.2931894515114104,1.8120281986799731,2.4339094658796676,3.0548633225015274,3.684763314645349,4.264053528989781,4.764323874163114,5.181101196485083,5.396628223132537,5.528364209395792,5.375692721677857,5.12401477860879,4.709848890127414,4.187483797957649,3.625671541311939,2.972818110675623,2.355146500230927,1.7386739689536654,1.225477901992699,0.7657901541833871,0.4840123542795878,0.32955705899726606,0.30249339944139275,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.256716626653883,6.488831397106485,6.7182011461834685,6.941902103181595,7.113194116263248,7.2432523912389675,7.341354621538297,7.407493462822398,7.445330679268341,7.445330679268341,7.415725830372616,7.283569675820977,7.0645216304724,6.61425164321133,6.078095582078458,5.31337418044193,4.52539969886243,3.6775322625271,2.8455645871070434,2.050873165225489,1.3886387957916342,0.8577536883009949,0.5223116841121407,0.5983812988322856,0.8445769035425426,1.3623353290971467,1.912892241493565,2.544848097434722,3.200692665855,3.85357864901244,4.4520439660769,4.982005605957487,5.406942896415327,5.6464937066053675,5.784279063724256,5.625772984732864,5.359758290562514,4.935703706262854,4.379032822384987,3.792588462183245,3.1282341350687584,2.4754391893105834,1.8455702795346678,1.3034093174370356,0.8197271728441331,0.5210560392708818,0.33830159976273455,0.30748019832417817,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.159924065923717,6.4508110571955255,6.734901601302592,6.988754947865463,7.2258926803665045,7.359747790011317,7.464107373445677,7.511455406408576,7.539263969326792,7.5572937050774085,7.557222939494178,7.480896819921231,7.261848774572654,6.810745608305354,6.247565611717191,5.468099069975604,4.656867426836327,3.7951248244467006,2.9565146604440518,2.1352870735190126,1.4585955750459267,0.9046242971578577,0.54948373193202,0.6171169758603059,0.8723096081761206,1.3996169832834524,1.9685996934364076,2.619543106103548,3.2846632147088495,3.9563424677571426,4.56466962297773,5.113145037939131,5.5512400032789175,5.796841619960418,5.943799745246012,5.7815859915530705,5.509983708470405,5.071888743130619,4.508251991162247,3.895722746253437,3.2233741397434486,2.5597826096899823,1.9076085877541236,1.35704439128618,0.8566937546580635,0.5465434474650357,0.34761956382294823,0.30995481369018085,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.130284052134575,6.430431738721209,6.73436403194749,7.006846420743909,7.254355499645186,7.378872207707523,7.467723654514631,7.483028493256873,7.454296599114072,7.44322528371449,7.3667461624535235,7.286263539932752,7.060665083801099,6.629571792129273,6.0771774421943086,5.334511391801292,4.530562917197362,3.6808390747274986,2.8626674713257785,2.0515336600419345,1.411157223953292,0.8676552423093407,0.5305443466827338,0.5917289195646116,0.8437715624347168,1.3428303135217219,1.9022859608156177,2.533991646149348,3.1864782260124183,3.8515805184973697,4.431428902820249,4.973206992017602,5.398568515560982,5.637596545352426,5.781955489361371,5.6289145038351345,5.36482616518486,4.938555536698614,4.395844711230831,3.7924073301097234,3.137822679789249,2.4864889356822553,1.8519201528739104,1.3151304990032429,0.8213878334128788,0.5376612049271554,0.34194218988382574,0.30995481369018085,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.089765745800679,6.398910594241858,6.711065501789815,6.98683278521632,7.252991944710196,7.364766708041919,7.425295885252136,7.423946092546652,7.349042762966575,7.281000508342956,7.15789445025702,6.980313173942248,6.749811080950192,6.3324265795431645,5.803332461564018,5.086363494490683,4.339934704271859,3.4976864528347185,2.715499871224944,1.9277766905323543,1.3143213562755514,0.8202481674408195,0.4932335397531209,0.5466546174563605,0.7917382214378159,1.2683493211292465,1.7867520015380804,2.4081352844521957,3.0274699995057195,3.679215580947667,4.235713370033845,4.738484579249117,5.156436637571963,5.382633939541849,5.5217846181866745,5.375129438584447,5.137611982097206,4.71925235085992,4.205587664072937,3.626233361953261,2.991451360351683,2.3747460096773927,1.7524066498106585,1.2460330579047505,0.7701714247826694,0.5084971607823427,0.33578206409406364,0.30748019832417817,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.075737862280473,6.371127573836554,6.6741051319857565,6.943536005223966,7.196066306152833,7.283485114710296,7.330292681484795,7.263698898569604,7.15998171479837,7.033055304647488,6.823385391090269,6.599396373913115,6.237455187272898,5.834779905387127,5.337041712280524,4.673416337102778,3.954310538446288,3.204610907082271,2.453698685622969,1.7200989518130219,1.16636868769777,0.6997047219908183,0.4458850049365184,0.48330901348929856,0.6978613867042189,1.1308294926234617,1.6265163286616164,2.182515409094337,2.7795033717901783,3.3855135649151684,3.8982633378838694,4.377266170921953,4.737796159375358,4.957102447170955,5.083689248520457,4.950356042088452,4.721468865200499,4.358143716457208,3.870637648669364,3.3326706331259097,2.746661323946953,2.152551636406655,1.5922973803866312,1.1122654909975949,0.6760450807891187,0.4688888124822812,0.31794519695788503,0.30748019832417817,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.079116135298842,6.341729327594233,6.620133322874368,6.862068186182184,7.107383417418684,7.142038862993894,7.15760270423393,7.07068316325727,6.894674298813169,6.7366449249387665,6.403598524407668,6.084552422358496,5.669895681558485,5.215712510960918,4.736116616348655,4.149011019022704,3.501140058243901,2.79359496928783,2.1621000382021416,1.462010030928279,1.0053235029565089,0.6099021231858921,0.39537763569102835,0.3912533093753716,0.5897698492344583,0.9462934987149345,1.3824012885959163,1.898283684819669,2.410233829330392,2.992430579685874,3.4520493391884925,3.8867176073507563,4.223811608120779,4.4054912709933,4.527716418354743,4.413269594181467,4.213721029617388,3.8709825680238303,3.4665083585203433,2.958826755328083,2.4488523295602276,1.926184601371762,1.4033809657939864,1.0108040224093184,0.6007067747865635,0.43905278942701353,0.31192735469802124,0.30249339944139275,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.139184874619339,6.341769468807594,6.578012474146122,6.795045828024362,7.003956659477176,7.013113683366103,6.97534087526479,6.851535636294265,6.653005661175727,6.417956311057997,6.0245378787192685,5.583688334465757,5.069931496186526,4.565877700879184,4.073617248302985,3.525489777622739,2.9556937604339724,2.3324715516728185,1.7448751328114993,1.1752950715372095,0.7715797814011895,0.47157338152618844,0.3399940302103117,0.37004953296252396,0.4750588213724789,0.7943238921742053,1.153110203274835,1.5951547558656354,2.0657846236830446,2.5538353455979497,2.9870340324363736,3.3688772624256367,3.662312902715163,3.8226698987076,3.9193933976436606,3.8148305341289745,3.6416194839361884,3.3391103798982553,2.9629264674767777,2.549935780127313,2.085733254811423,1.6372252318060285,1.2016236651456795,0.8459748484053065,0.529780487463364,0.39770504244773996,0.3135582843368421,0.3043902790186963,0.30026334347147343,0.30000000000000004,0.30000000000000004],[0,6.226428226129869,6.393033990670604,6.550550482127662,6.713019628372592,6.890930123725379,6.84475141983805,6.781867249715286,6.606248356577655,6.327011634071205,6.0487141599835645,5.514990359893258,5.0332820311455215,4.438301047722352,3.8719238195860086,3.34771525442471,2.8940289689617846,2.37851487596192,1.8634151511240158,1.396547830570841,0.8865932399112297,0.6596846763635917,0.3975224507745063,0.3402427811249844,0.3065486114203566,0.38064630787490117,0.5597135536087927,0.8785571814637927,1.2369806865381032,1.6214650013099385,2.0620561384860903,2.4026791245015238,2.761271263452429,3.0094600716999285,3.156727630161269,3.2472476259375838,3.1831497098209773,3.0768482007099385,2.899087230385614,2.7012813092159838,2.3740356146714827,2.1351577913857014,1.7516996654761818,1.418205733104984,1.1372500609388212,0.8475584669558809,0.7070258416325685,0.556105843557593,0.4453331805739784,0.35247165670350045,0.3177190368143814,0.30000000000000004],[0,6.391000334166492,6.484660120765318,6.604789136263981,6.701584419160218,6.82495985342423,6.788144650348981,6.698605248428944,6.499413240821976,6.185709064661208,5.827356289378989,5.273189200514402,4.664774640241521,4.030070768648907,3.377975485431826,2.7922125607869415,2.304158812468795,1.8399476861408017,1.3784092648821464,1.0239696877703037,0.6326905764570672,0.4684775542149382,0.32461513491380933,0.30578275984742587,0.30318827948912097,0.31306846578284886,0.44176105673515775,0.6138766738021739,0.9317852394497752,1.2318330341658266,1.586527426930826,1.886220929709859,2.1620388462475875,2.3878645058225287,2.5195625286453116,2.609135298614587,2.627326248008999,2.6498761424191133,2.5366587074674234,2.4834202196017054,2.3317837825817556,2.1692343985663167,1.9909368619189705,1.7223153756515401,1.5208024664752253,1.2920029477231105,1.1272805646083024,0.9186498928002049,0.7408383035918795,0.5315778062111283,0.4015126582235691,0.3274466747759557],[0,6.5850059733239705,6.692207611844884,6.701695418539342,6.772493498659649,6.8437571283829035,6.825357122715363,6.745920294475816,6.574319578127449,6.250891237094829,5.872966091592,5.274193020908963,4.643754779226631,3.906433577181799,3.206224918814464,2.5304666699428533,1.972875158299992,1.4754228979080282,0.9937940796712887,0.6994652199276745,0.42567467796586644,0.3883998174532348,0.3058787752065186,0.30578275984742587,0.30000000000000004,0.30368794826167855,0.33200782504368265,0.4538000552945849,0.6135734755745723,0.8732398894010716,1.143982741833607,1.3695790764454934,1.6046877171834268,1.7659781324472168,1.90063261755805,1.9975438172589552,2.18094260405754,2.286579379211419,2.453080518623052,2.4958217831681333,2.5096255203868494,2.517763395271273,2.416263561468004,2.333079153794238,2.177482831991543,2.0147724067527437,1.7785038365649894,1.533438010357605,1.2097606451643543,0.9121720558745503,0.6544709417097356,0.4281059811245922],[0,6.755797079194534,6.889836753446606,6.91618149049131,7.011837280384083,7.060959556257261,7.0989302888707835,7.047767854659277,6.894514658078341,6.598383178196483,6.210930891001645,5.6056118157413835,4.9369102740556565,4.18341098292457,3.4019566476701675,2.679216745988121,2.0576654266487764,1.491307744810525,0.9786413881005875,0.5942802147198278,0.3741568713048784,0.32409964560792104,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3095648118604626,0.3309817522334144,0.44073864190478096,0.5546903517338044,0.7853638762248241,0.9346003348943759,1.1193120793018054,1.2640928501933821,1.5117803765699753,1.6199932762754463,1.9644873925116264,2.2427845236163986,2.499066262972157,2.8060495804908654,2.9139447997497663,3.0709004152166273,3.117115269055365,3.0950451523707723,2.9864475865006175,2.854892461392566,2.5587773647578382,2.21669036615679,1.8431841535222866,1.3744960224042806,1.0266270309980277,0.6686557004052707],[0,6.8990914048336665,7.060120294610976,7.116329189024394,7.23194510431695,7.3714668053105425,7.437623962284039,7.441979772189496,7.326943124530867,7.049806687425933,6.689600734015928,6.080076365246789,5.404200166933209,4.616723560344301,3.8187248906865428,3.0231351193921463,2.3634067741277707,1.7330337030473026,1.1504876196663398,0.7338353517002574,0.3930014052253623,0.33661001346051567,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3031942811666888,0.3126282364233173,0.3784995457480409,0.46987550251178356,0.5826492903224578,0.6976083740885786,0.8110299633437725,1.0502937645244907,1.3430331453790856,1.7671710135875873,2.201765005323364,2.6430141241133946,3.0387390165259043,3.4092256453832372,3.6630547283118764,3.858960903901246,3.9716189059698843,3.9089869925693774,3.769344254369221,3.4288774791746284,3.0270842709990546,2.535869377517109,2.0127001128871918,1.4853674496934097,1.032958490187079],[0,6.717042335331438,6.969514014467497,7.248981929015948,7.561759959864221,7.815749992238669,8.058306507347957,8.099138527160548,8.051739504936988,7.8253095750564325,7.489053682961586,6.929958031249034,6.261097903350943,5.485156638051713,4.671714254321265,3.868268279753588,3.1565026439203594,2.462149847224739,1.7757270810845482,1.148504376879772,0.7139386012263993,0.36469906557316367,0.31864281869862165,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3031942811666888,0.3060217952768103,0.36631516967170286,0.3760947350790349,0.5064919912301333,0.6511295968462116,1.0198965549537833,1.3768941048753554,2.0271459708081694,2.5450499682873557,3.1481645194272727,3.716246528770138,4.167251105040046,4.592662010613356,4.809454726356641,4.950286907192661,4.864311737267103,4.707829107190409,4.280900313714436,3.8169062478936935,3.2452431008346703,2.5895437152402354,2.0026555253753737,1.3706573116443923],[0,6.478794170564856,6.817106035780178,7.203434334203396,7.731896881189325,8.184987917981681,8.534743654634484,8.78148683386108,8.76992404732307,8.63826191828684,8.354338050920658,7.832797402558576,7.215647392490435,6.447146542949316,5.633885507791515,4.806752951199494,4.046937714163903,3.2415394717987325,2.4896512243187483,1.7240987465563158,1.0776487388725409,0.6342253252539019,0.3368147863498572,0.3085660225890152,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3003414190649867,0.3097815447684791,0.42926124380844777,0.588753040674435,1.0233873713782995,1.5074256116198288,2.2099048722122387,2.927658430309416,3.615409330367106,4.303626279697205,4.9237562587183685,5.384580109833802,5.725301091766892,5.885845925370481,5.803773533534399,5.6150421151562755,5.15756787650437,4.597082208993654,3.962612375204146,3.2249596559225986,2.506474972950897,1.817409857231279],[0,6.078082168645358,6.480045395135752,7.132301730692363,7.76160348045229,8.429155474417994,8.967516763932336,9.322412495976598,9.575917030366016,9.511851055018045,9.350300632693333,8.916280530100613,8.338261512825905,7.627168176773301,6.8070606509241385,5.969845145493216,5.082418446758558,4.214299678730472,3.240109227191875,2.367739496925547,1.5547542946691377,0.9020040765579211,0.5126234031157875,0.308512618268705,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.300359220314943,0.30977537432161517,0.4293845458561698,0.7389539746752642,1.2222512815901831,1.806254831600174,2.6164481576997805,3.3886417072183237,4.237804791806812,4.973530621518489,5.680783452805316,6.204147805340932,6.572700207743818,6.760370259299807,6.66635765512485,6.460054913644806,5.936858485144389,5.34213780582544,4.597082795675332,3.796270031320505,2.9967530746215,2.1848248991005095],[0,5.595321110214711,6.10538876825502,6.849040305693159,7.71518826425796,8.484534277491775,9.217852797285103,9.750247477755336,10.098407500334782,10.290191917800971,10.197607907445644,9.888590372867327,9.351961573486493,8.643970790961033,7.7676204250763865,6.921612978856359,6.010021548565439,5.032447121991973,4.007463514679662,2.9235745700118323,2.0068370963227156,1.212919120187903,0.6445602609066543,0.3680851938879208,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3014557214033182,0.32951340677491836,0.4858926685281608,0.8296088889718405,1.4292006051449198,2.0618445533482963,2.9427009965340574,3.799215111380449,4.682224095054476,5.529564882572382,6.284379085586271,6.857079141743187,7.271191968498997,7.4726206659854695,7.360054060824973,7.136632619366582,6.568464363483021,5.9061431318381805,5.126821358314521,4.23218659651784,3.373706492191336,2.5011635811681554],[0,4.969698523660596,5.625739964494554,6.494684940130949,7.450115331026405,8.446201219328248,9.273704446967242,10.001560168647606,10.515606185424499,10.803361453506573,10.958784886515183,10.719321487253305,10.296540173079457,9.577247339942872,8.67771687557375,7.7243497516307755,6.800836193201331,5.82072254398972,4.709889685058949,3.583440092354838,2.462472267515989,1.5830211668546907,0.8743935937741529,0.4439423550260049,0.30911493729846096,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3020440248166818,0.33963797125946793,0.5141233402102909,0.9260197149574083,1.5578224851396916,2.292136348411336,3.2076995126701635,4.134115094602653,5.080778412865491,5.9608971934840795,6.80354158712935,7.404249502104675,7.867491721828562,8.097376659270953,7.992825249615005,7.731574916688348,7.130791967967476,6.423482229831686,5.577779451128616,4.652896454267789,3.7085978398772914,2.7901988152895645],[0,4.33967234538731,5.04098580683056,6.024707482551131,7.06916685676002,8.135154168068265,9.16375962303341,9.979522463311758,10.675486984907032,11.124901157661306,11.372179150608783,10.958784886515183,10.30304673658801,9.180372078278223,8.064706184570804,7.016761577049806,6.262338962366267,5.522249475593825,4.846095181605642,3.8609866808123083,2.79053261660209,1.7694367083488627,1.0111030930036065,0.4903883973577525,0.3247147448196268,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3020773630741309,0.35857455956159057,0.5424165214180501,0.9734580224344667,1.629934241224793,2.3776875856267305,3.3303563512450283,4.2697395974002195,5.242683309087893,6.140689020709443,6.993392734324473,7.633257162162339,8.099937138372047,8.335926449645765,8.224526031952205,7.957786944694055,7.320484889997371,6.600612184079916,5.7380733644930855,4.7840343605003754,3.8270172197734835,2.8755877041018354],[0,3.619802541997246,4.404554842485239,5.427248722369515,6.561412313748076,7.7166644553973125,8.80476481165273,9.814300182281677,10.596214568923507,11.180356671613762,11.5824878428814,10.97299672891924,10.000200178825114,8.646398196401366,7.216050467911197,5.992946092834351,5.326151185100116,4.9176234149728195,4.490829796984914,3.9691536425097684,3.028165252316493,2.004381235094381,1.1409728373969645,0.5709330285756973,0.3545871770928066,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30200976431535675,0.3585069608028164,0.5543806367105122,0.9944556519315506,1.6599011711981662,2.431731597473531,3.384561792621258,4.348190969891408,5.333039863174942,6.243474765044775,7.113778966528321,7.754313753704806,8.246044137308983,8.485507758846362,8.376720914690724,8.103857494077204,7.463322113478328,6.720707552426049,5.846183218496722,4.885629094129327,3.9043163194059005,2.949684797680709],[0,2.9098648964485405,3.7017682866296955,4.773196614100673,5.931532389709033,7.1525591509030075,8.31194515185042,9.379431901353358,10.336287804346563,10.971609594606978,11.454089549003523,10.505820118560514,9.33749831862705,7.4979829951598775,5.955284280990091,4.497708267055569,3.978236407526424,3.6490664396659342,3.814370805829137,3.554730913135036,3.0931848763766268,2.075703191789413,1.2146935519191642,0.5993960176824469,0.37349927211380396,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30200976431535675,0.3585069608028164,0.5543806367105122,0.9944556519315506,1.6599011711981662,2.431731597473531,3.3845617926212586,4.348190969891408,5.333039863174942,6.243474765044775,7.113778966528321,7.754313753704806,8.246044137308983,8.485507758846362,8.376720914690724,8.103857494077204,7.463322113478329,6.720707552426049,5.846183218496722,4.885629094129327,3.9043163194059005,2.949684797680709],[0,2.2366857766900363,3.0114143196335883,4.047532179861946,5.206019651488856,6.441086296483452,7.644673817251309,8.773579656622568,9.772045131220318,10.462074958039828,10.97085543018915,9.902636272772396,8.491458036286735,6.569107273494207,4.824514075482186,3.297973373030064,2.941568482749298,2.7786968634829834,3.0687003925111163,3.2138152261510387,2.9741593129662967,2.0420819291824404,1.2020429341202787,0.6010273246397713,0.38181909351614474,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30138747052781323,0.3451445809157585,0.5310795273566946,0.9615756131379489,1.6007872134783676,2.3711324239088545,3.297141704738773,4.24776194419452,5.218300983923189,6.110379588666514,6.978629774236972,7.591574784642376,8.079475874512449,8.315700985384337,8.213706510899462,7.9441597769037,7.328739267514723,6.599204611150099,5.7326249199497585,4.799381461256609,3.8222271604419893,2.889171338041946],[0,1.6725362439078812,2.3710965223344806,3.365812048817369,4.477598959152932,5.692087471995503,6.892478986614356,8.058775097549264,9.108394406368687,9.832307567315539,10.338892556498566,9.21641094178765,7.706094941034456,5.6243373819617934,3.832274886173825,2.2117528225709937,1.9228977792744515,1.9119790359694697,2.4035264839424566,2.667655535668822,2.7707713690995184,1.884750279081275,1.1285016631505917,0.5585772633239223,0.3549824852520651,0.30151262977775706,0.3018616724404495,0.3026063442355085,0.3026063442355085,0.3018651786804447,0.3007727040519186,0.3382727060595012,0.5068708296755859,0.9193659252684716,1.5458464248470913,2.277630116314642,3.1876115879330786,4.107755424662947,5.053902442760622,5.928008827321485,6.767755886895931,7.364912019185019,7.825093335020928,8.05497827246332,7.952998858288006,7.697030395879809,7.096884844761514,6.395715118127311,5.550537457721396,4.632123816242747,3.694558549824537,2.776441293914961],[0,1.5360302181555607,2.1608323940704413,2.960175297014846,3.932488698992967,5.031643167415231,6.084568664575764,7.228015132219827,8.273888467397095,8.99137493756114,9.49065588572746,8.318146309317735,6.825801503187996,4.782381686959501,3.0623863185893083,1.472696134965318,1.3007811218601746,1.3239081586686008,1.9026161898189615,2.259938733319474,2.4231345674803113,1.6992713994730912,0.9897816981956358,0.5134721237106181,0.3453205597422011,0.3108751686956801,0.34871845481872055,0.3557529067514271,0.3683958815841488,0.35519749781767507,0.3478536846788183,0.3196405715231705,0.45011857265653554,0.779148361046917,1.346361644515408,2.0435142200906964,2.85395149252536,3.7416792680083537,4.619411571257524,5.43843956189367,6.2439459464995775,6.767756372178781,7.211985480178318,7.414443485286837,7.339025193559672,7.0985385722224805,6.5732205931313095,5.904825170629498,5.114051927892707,4.26465888680877,3.3603961915101803,2.5422897373373785],[0,1.7284338426160224,2.1253565264928307,2.844422195616177,3.5820060953604265,4.541783879081193,5.431413113783941,6.363757177312328,7.359974508068343,8.059430362879002,8.558298113879536,7.473936827340477,6.0891792754350025,4.063504572946276,2.4921588456518395,0.9617847376378392,0.800150874296673,0.8653629427504284,1.4718218537207617,1.815449891127083,2.076380741932714,1.4010332913490207,0.9285820154269506,0.4984218264096538,0.4383816745930209,0.4410403601936188,0.515981863523393,0.5561592983505954,0.5750987552932683,0.5578070896170058,0.5345090721801864,0.46708205386721136,0.43659423252057783,0.727069296490594,1.1392038862742235,1.7753431226715215,2.51969550277349,3.2934255626336792,4.135580070338818,4.872210374875179,5.621742071830472,6.112157673662752,6.499399766725642,6.687897474339151,6.613727666035422,6.404550213376321,5.909907338847313,5.336465913718462,4.578420576354941,3.806396540886417,2.977838543366289,2.212120444647424],[0,2.254441704550142,2.5490455849288245,2.9673573135447877,3.5942436706483933,4.278248766635087,4.956511890912715,5.719021879590756,6.377040306027906,7.021220453471898,7.499264717287802,6.554421613948046,5.254798896490608,3.5562351531044607,2.097391413330832,0.7857201480394684,0.6470881947072158,0.7264200764586413,1.2529428489715724,1.5525407734487837,1.7189962789120388,1.132795339769178,0.7030710847418273,0.6396393725038596,0.6395164149140531,0.7681921898086819,0.9187531111690579,0.996261746723148,1.04326325765196,1.0162627155882595,0.9743031219220484,0.8244540818094261,0.7553459383337451,0.7201481519901749,1.0369295831397805,1.4593982148427362,2.0967241730955792,2.8040859116626957,3.5101963510123135,4.203180883526911,4.862118385853404,5.299599845287355,5.653696790644986,5.814296630959533,5.7483471031996025,5.559371774419618,5.122886246073994,4.581101922434087,3.944421114413073,3.224952023256376,2.4860138826371427,1.83570011807896],[0,2.956823822689047,3.0470351834641614,3.3213883147624617,3.575766756975626,4.140357245464016,4.489446263349542,5.019693374321809,5.4888073349352835,5.871006064914746,6.327254669234952,5.911350129995042,4.945197205665811,3.481090991018645,2.3979821166537483,1.169471895269203,0.9683049884759514,0.9059660066498973,1.2710578096487957,1.2346835002817678,1.362897305279986,1.1108531511783375,0.858592510181805,0.9285317985114172,1.1507199296545183,1.337626038170408,1.5559736340442336,1.6849297557408116,1.7468457602331144,1.6966902202381953,1.6417639294855264,1.4261797066789084,1.206143204711223,1.0783451004205808,0.991155233199706,1.314753855732605,1.6574702880442023,2.2395096643989207,2.860532340422603,3.4157638166638034,4.031160495545123,4.399372146662493,4.717147310828693,4.863169492396812,4.818253621195727,4.645221120360391,4.273610864726215,3.8141645993855082,3.2265446724945592,2.6646242990594944,1.9821357686096148,1.4580014168295135],[0,3.806284862870461,3.7500935077565636,3.783116234802206,3.8868469469440754,4.047874150280689,4.254809436199359,4.455748066263619,4.683440937811858,4.88270943230256,5.114915880146495,4.913122527213915,4.468482256107875,3.4705529393421433,2.602916035879726,1.7763171985909458,1.5434448221181396,1.4014056472924912,1.4741569462584119,1.3004656954351594,1.0170665287566871,0.9227846048031068,0.9795834900108003,1.3113103419255034,1.662623037334837,2.0174706110834744,2.2703956959251252,2.4663938391818316,2.5595137576419287,2.5217825122872477,2.4206266257910007,2.1673051140504658,1.8798367843015367,1.5453688811155721,1.3615100134041906,1.2449855993894006,1.4579205838751497,1.7433789074195916,2.2279394371056793,2.701082808128509,3.1802659581921047,3.515635478900406,3.7698420365467094,3.8918365363913976,3.839984854166743,3.709566454983607,3.3707852719949103,2.9807360604010467,2.488935424953039,1.9797829715190312,1.4680585578023824,1.0152543887921015],[0,4.704250009466567,4.522200867490789,4.283490019313014,4.10273722878008,4.096938790167436,3.880049078577149,3.9520601242928226,3.8871371631697054,3.882177812193545,3.9639449193984886,3.9493379607372017,3.762572049455266,3.3498347069746544,2.7635846721867043,2.0844394632227954,1.7253654946585926,1.4290580890532754,1.171264364109093,1.150142731324328,0.947207354439642,1.3801945516962997,1.5189413566503092,2.01565060269512,2.478690807090841,2.891929288738183,3.251050503926755,3.4607290252391314,3.5783816395860555,3.5138329368805232,3.3964672898755794,3.0437075224048424,2.6826135295591564,2.228315476303423,1.751052434138691,1.5047257501360207,1.2449855993894006,1.4009346253917154,1.5912882615649453,1.9574456319754066,2.370279157833228,2.605933856484314,2.843874724312625,2.9390063412436698,2.911401898281391,2.794916513770216,2.559460431877453,2.221622447977733,1.8325801637016308,1.4579677938407376,1.012844234476144,0.7819676997953522],[0,5.613828905738218,5.342680462395123,4.9770689834172614,4.512532451480712,4.217862201773141,3.83996453739384,3.5099951259985693,3.3234311649902266,3.0921175721190797,2.9727879953304264,2.9129658232562847,2.9033848235115887,2.7412752082429668,2.5011556285931373,2.094934902310071,1.7819423440254158,1.5376282509386199,1.142262379957736,1.1500691967496741,1.087012023184293,1.5765879524024824,2.0902373654966557,2.6639879505767317,3.256290008734441,3.78191834223062,4.17664525615502,4.469197760342126,4.600506923247731,4.533915162961308,4.385073271934055,3.997347482325198,3.5194658736421762,2.9910567551715888,2.3790827443964804,1.8372923266660743,1.4476073662725388,1.1418670032684803,1.203455143455754,1.3202719837992367,1.6287439943906583,1.8285895649743222,1.991447524872822,2.074179561425281,2.0520229757375583,1.964578628093301,1.7651945480741194,1.55362112600257,1.2155511668456396,0.9652644455434818,0.653109407924024,0.4921067883384145],[0,6.450056802606804,6.167137447936839,5.655993429770414,5.05629298034921,4.474174551699644,3.82442325216443,3.3347545993285297,2.796711766523101,2.485354947418046,2.196630191888548,2.0742194592715206,2.021577821049678,2.0232480326772286,1.8649302750602152,1.6313693204528399,1.3977035371340027,1.1975288718548447,1.1538152392990457,1.3088966334942944,1.5694042040982576,2.170223578300684,2.745487682614605,3.432991433794736,4.074334002092818,4.69959864937666,5.164517496221891,5.492350751651901,5.663126045186302,5.581608412445197,5.406924261500498,4.9441508072601295,4.427563155603891,3.7550998808549627,3.0536953217080085,2.368580743069666,1.6852010262161774,1.2502270671509566,0.8762126025737365,0.8978916126432879,0.9916301184928571,1.1309981492004888,1.2584515971578725,1.3044989169387355,1.293015104606013,1.2317427507390932,1.1005549976335507,0.9245851154702989,0.7475376665171483,0.5705722420309847,0.3989762239947878,0.3805530827509316],[0,7.117706962599547,6.8003021182390055,6.2641161239621725,5.535427294399186,4.820110177306449,4.00306794514043,3.3219103785224666,2.7141847697877477,2.223577642997251,1.8726794117619103,1.7099515600182889,1.6559345104627319,1.6855042123580934,1.6922319444995317,1.5327315980149894,1.4550348203630146,1.3994871412034124,1.4682589170271494,1.8108554948942968,2.2127788297991136,2.8669739671024885,3.5083646079184607,4.209868786445593,4.887963508068572,5.560807343391901,6.078126948291694,6.450500810607808,6.631573637947693,6.542648517455319,6.348433174774045,5.819499833407529,5.2174780311532025,4.500851248750516,3.6525326170385286,2.8806723213367444,2.078055268378651,1.3978612626662432,0.9311593950410433,0.5978987732750027,0.6049877364061247,0.6619158180700089,0.7547565051425216,0.7913292523107165,0.7902733087588558,0.7453029744291955,0.6835798142042047,0.601489781712931,0.4792471916461112,0.4313668069222245,0.31774090756522466,0.3111758565091509],[7.92970584643658,7.710696654462553,7.3658451130932185,6.7841288842833105,6.03179479317187,5.205998807929799,4.310952356392074,3.478736106473876,2.7449126894678137,2.196537654947584,1.7330406528293452,1.555298320508861,1.4673268333050533,1.5419136863693668,1.57492831341632,1.584022293200141,1.5729161467997146,1.6636004434617835,1.9430011639941982,2.393370244617982,2.9263429093553177,3.6050456362350634,4.299668045183374,5.027445959483719,5.718862752993278,6.392163071011406,6.934226973035256,7.358429244823085,7.559194074250049,7.477289656117965,7.253386495370278,6.6830484911906956,6.013542895537349,5.206440946586328,4.313645238580556,3.396422389533971,2.5204952710652506,1.7243641704778914,1.0497786468774004,0.6326298189400976,0.33049247021349015,0.34902349891362316,0.36659518835207483,0.38542792215959376,0.37809769300122653,0.36037758497637307,0.33211530047845206,0.31194990337576667,0.30249811321589837,0.30000000000000004,0.30000000000000004,0.30000000000000004],[8.159591577403809,7.931019578599912,7.573192764460378,6.964661372729319,6.200047846806114,5.367903709371214,4.56540579063631,3.7612093930576718,3.0845352215520894,2.560113217671382,2.1092644143855086,1.9581810419171475,1.8899411223698974,2.0108166988874574,2.0855938587306833,2.118554136716987,2.1657240558457795,2.2836323706745283,2.6224740700861573,3.1042265369906077,3.655880642997068,4.35387119950395,5.044320357433829,5.760778206465777,6.433909303471295,7.096923942984235,7.593505104016863,8.026693072189547,8.247530077296208,8.139157604887828,7.899256625467934,7.254478648644511,6.543772155709087,5.670917766131801,4.701701951905304,3.7490235744284384,2.773337864477961,1.9387873523883679,1.1984574052391135,0.6987019302255384,0.35856426503281913,0.3116245597002332,0.3228264385966979,0.32903682862191874,0.33417539820391795,0.3227835700542081,0.322752558713701,0.3057066096491745,0.30249811321589837,0.30000000000000004,0.30000000000000004,0.30000000000000004],[8.208347051805402,7.983721390576525,7.633157161844183,7.0148023155664765,6.276937913573215,5.439552574700927,4.691645867628779,4.0003965761864295,3.3533254406426933,2.9079661303498674,2.4817033756092486,2.374445192783543,2.348323799017348,2.491179746584436,2.594460377057478,2.668944654575497,2.719483304076998,2.878848932563482,3.243915055940531,3.7507032246867613,4.334507279474507,5.012943583788033,5.697752934870624,6.406559807513711,7.043613398367308,7.688013647021171,8.152250764827015,8.53856402448263,8.76750463778506,8.660552835529842,8.393381000220174,7.7324753742467776,6.964579093924437,6.050620851802415,5.039953412776026,4.017819353951691,3.0258530863495574,2.1121450350688384,1.3336200496611894,0.7971225928883765,0.3817879396441435,0.32863457417104125,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004],[7.9784617476083515,7.7598307505947695,7.4139646518172695,6.832740544393011,6.125968245351504,5.356157614903025,4.705686355988147,4.068966052727402,3.569520383717044,3.170999599931249,2.8422908316818036,2.81279507223871,2.8304584202399066,3.0469382609778215,3.1588293434223176,3.2465963348390536,3.3032002092244745,3.465970305451681,3.8423068393977635,4.347087215798514,4.9249713430543025,5.569480999603885,6.23335356944214,6.887776975403134,7.497552289694107,8.082303324847937,8.491798589963823,8.845426687889585,9.02765814019674,8.912502950191689,8.632844844033466,7.94450820327956,7.162620267441589,6.222376885808484,5.197365129150298,4.1511528276457135,3.1322849457015867,2.2054278267788057,1.3795810123665353,0.8336924178512852,0.40060278592763754,0.3348133084984639,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,7.2660959229715605,6.9470785105287245,6.394634414306571,5.831371595035523,5.102465519319278,4.588326772006954,4.059695469475608,3.6318868763593253,3.3971734843550196,3.1168016648580723,3.213933738720209,3.291531419598888,3.5367138443356425,3.684129918232249,3.778162385867539,3.8222661240332254,3.9688111164300928,4.324227765350184,4.764857302365689,5.335182744852598,5.911950257660349,6.515350590229168,7.117482397614606,7.632902336964883,8.18449313058369,8.504662744663817,8.788571080679109,8.923035985592199,8.807541447754684,8.525721591034236,7.864147029286657,7.082796622956444,6.150381782419818,5.146817917015214,4.093746663358339,3.0992086044809897,2.182633610059004,1.3707539946022533,0.8332088935522162,0.39329255429282184,0.3401108603313838,0.3258248060705162,0.34780767161147197,0.40206195128063804,0.39743817182793695,0.34780767161147197,0.3213622326663359,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,6.634890759413246,6.353183345419196,5.841607010628562,5.316768500020886,4.767195162206945,4.320115691666837,3.9288738301905513,3.6188271530790677,3.456786880242073,3.345488016773352,3.505705968686979,3.704716627868315,3.9976110726951903,4.17178297472046,4.284028441575114,4.321122952577348,4.4493737064295695,4.769303245983961,5.1828408140518425,5.654729249733486,6.194168022963471,6.723769375113423,7.2435935056459195,7.701155535909524,8.141095759754913,8.41509089630807,8.609841220040469,8.66583381431152,8.514013547022667,8.254871772007053,7.609137895959053,6.86140134002005,5.947998246088089,4.960841096087085,3.950924531975912,2.9702688182962635,2.083453226353708,1.305120762782538,0.7876497059828274,0.39205673446431155,0.3443409123779477,0.3658960177817532,0.4280329009119317,0.5069181507047713,0.5623796666864249,0.48903292239001295,0.3964927563031704,0.33164128783335034,0.30000000000000004,0.30000000000000004,0.30000000000000004],[0,5.805210181007509,5.554732163001958,5.130624760712707,4.712539532442378,4.236364631685156,3.975218668018681,3.653731531076901,3.4970213466311666,3.459831669952411,3.4295535084602693,3.7870139105476737,4.014825303504268,4.3493223264282115,4.535719048053015,4.6554571464974135,4.656159332890349,4.744859940174945,4.97151592393835,5.292512150610254,5.704932812985205,6.0927395291205935,6.569521951879914,6.9773853978037605,7.338137258677994,7.711693190571736,7.852646977614781,8.012705892604874,8.006178309175294,7.861342792002392,7.607107674724541,7.035823561718079,6.325522592557672,5.484811198638717,4.568184185238036,3.5940449616442325,2.717823706822558,1.866185053342705,1.1565533098727347,0.7140553181545282,0.3528695985248165,0.5962262700166898,0.767484229677553,1.1378481354778882,1.344610862437346,1.4559588679505808,1.1987643386855873,0.9396323805139726,0.5844377459652315,0.37968727993766227,0.30000000000000004,0.30000000000000004],[0,4.921866613542324,4.719584398230314,4.333408566974262,4.0227855369471515,3.65105875517422,3.473051633041369,3.336574589507197,3.251661560154399,3.3743979065512706,3.4686012433138806,3.8823322188857485,4.244441849744994,4.596569612667012,4.805995124244141,4.937758291777968,4.938028756134057,4.938391787530881,5.116965386179358,5.3183210770030085,5.637099992020775,5.942476790744456,6.263219886620481,6.6160086557076045,6.860144887896509,7.136682431700188,7.229126154819364,7.282903942496809,7.247836510596188,7.090107747318946,6.8494476478202735,6.319287575230904,5.703518712999825,4.901419285911405,4.077451703527746,3.1784523688179642,2.3614102615546733,1.644105231811919,0.9693484008795072,0.6487876773019041,0.3753424156588385,0.7775846067292926,1.2686953578701776,1.7935848386284101,2.188790709901658,2.4104459432480643,2.100119950898153,1.5792542693761333,1.0539261649927425,0.5587386889378192,0.320883940081772,0.30000000000000004],[0,3.9900779272618863,3.8015952505500064,3.4997319359704573,3.2374962336051416,2.988421297765707,2.92500262953558,2.8710751592741866,2.9770838471315546,3.1736836643398094,3.4395468160009424,3.93623246971722,4.3580217150897,4.728528280837777,4.941949203502476,5.080615311030035,5.0808864074049,5.081250860767944,5.0817899920235075,5.220169765708147,5.399624694582428,5.58731379892844,5.825417376946526,6.022623401343004,6.213151038041386,6.374875945908376,6.400448018305626,6.406532183136948,6.311655265463366,6.156358277965165,5.936043710070253,5.472857093319677,4.898126131626978,4.216777732174801,3.445192586244865,2.6498119508665927,1.9465836376731152,1.2864204833169661,0.7903176356035779,0.5460186103082518,0.42534371444447694,1.1351569552011171,1.7892360094382356,2.716063256500463,3.171551575613512,3.4940968097878558,3.0735706123260162,2.482768423757368,1.5792547560659342,0.9139342857741999,0.386675577438385,0.321256373493769],[0,3.090001515175032,2.940073104269576,2.680316090097034,2.526179570245678,2.3270049657810468,2.3862239924781568,2.4460664857512393,2.640972530878599,3.0116124646134477,3.350834077191095,3.8428706531298618,4.296782633556129,4.659889238420712,4.872335552522412,5.012813477169018,5.012740524722663,4.972587540583991,4.927072011411284,4.8674561618006145,4.979744240329253,5.031855263949469,5.161018634692821,5.285695802181015,5.33776776446559,5.449151425420088,5.411027489965948,5.388042495301087,5.289297015653419,5.1486265419922415,4.943141768215491,4.555442851513389,4.067223572255979,3.4439871873449563,2.842576698010102,2.104388394485571,1.5495736421942834,1.0173721205569475,0.59613537477338,0.5505054244082899,0.49809613993423896,1.339399892822098,2.17902439987815,3.163732797577803,3.8165262840700453,4.180767031756827,3.688533445096641,2.9799817252404592,2.0080387211053887,1.1116859298001815,0.45282022762068586,0.3386405938040302],[0,2.1984674276000162,2.0822056611395316,1.8750642440112821,1.7611140864204107,1.6783895190116802,1.7886252207511748,1.9685106059844812,2.2801372937644486,2.719501325846822,3.22990391685369,3.7187634415722846,4.1621659842650685,4.513877239232405,4.718253257133402,4.850013737530309,4.850013737530309,4.809866432402476,4.695310552364182,4.582969042594703,4.492199116789804,4.48279152644041,4.477607459646649,4.50257947640402,4.489081902078516,4.47300407773159,4.40999980609506,4.336650299375469,4.23248353711762,4.096056894419354,3.9315881048219996,3.5794066963401314,3.173524366082884,2.6462321911074027,2.1077357973255597,1.556074533622311,1.0741507571310527,0.6894600364034031,0.40760563336004263,0.4190715713490387,0.5636726241089833,1.4608698526935313,2.422547101830986,3.506196970150589,4.209504508842748,4.676215901078437,4.143270037258367,3.3700760221833557,2.286426153863752,1.348170488988593,0.5228486376222612,0.3823991842866534],[0,1.4896196777350386,1.3942752631576452,1.2457546068139123,1.1836492484917855,1.1418222036925472,1.3861877922071613,1.6150037800403656,2.043253266041149,2.4714066317967056,2.9732498248551127,3.420300995006048,3.8471874225736737,4.162166633466293,4.3555169765514465,4.479291907160665,4.479291907160665,4.438926761054875,4.3243707751692355,4.105002426984664,3.9422326814536914,3.751117310786257,3.6905283651426117,3.595301467846548,3.5212452060796493,3.461268705222947,3.3572989655787895,3.2847208265448478,3.194747744660236,3.091834972051562,2.9509323911423517,2.698487279668646,2.3464153528920053,1.9406749778576333,1.5397078794107015,1.0674032094713726,0.8163734422250111,0.5086802756280082,0.38980114642629204,0.4119724119492749,0.5636726241089833,1.4608698526935313,2.422547101830985,3.506196970150589,4.209504508842748,4.676215901078437,4.143270037258367,3.370076022183355,2.286426153863752,1.3481704889885933,0.5228486376222612,0.3823991842866534],[0,0.8959096360209242,0.855036788714088,0.7339283756857873,0.7243989375072919,0.7342576840814559,0.98933428909295,1.2795499592613078,1.7337734748374207,2.1784532926748543,2.669250372237931,3.083227708045271,3.4676163954735615,3.7659696614394287,3.93432645171762,4.047264148848619,4.04726414884862,4.0140884116129545,3.9008860134160113,3.685416635355817,3.416633329487074,3.160539902695454,2.9383169285462283,2.7924297391059496,2.6329140617808005,2.515784865083991,2.4039490569655326,2.3251148857446604,2.2438729597700147,2.171867211212134,2.066775067757925,1.8544419377947416,1.6308300720882387,1.2818516451238668,1.0190429330977295,0.6816153362510009,0.514402447397319,0.3590425448631016,0.31324884137913744,0.3695675877268576,0.5278798152445081,1.3523505026117368,2.259568941483405,3.3309610674683796,3.9871190309812095,4.460582928518072,3.9669020312535066,3.260758498286365,2.1776038710959544,1.318124322772917,0.49886695511134715,0.38250853630363824],[0,0.4802526622428829,0.45165909486220435,0.42406631037577225,0.43930640672028964,0.4992764156127911,0.7693061158186729,1.0716104326285065,1.4587413506422924,1.876119921028944,2.300862287401954,2.6719838501359026,3.022182203805315,3.2779893987739097,3.436387241737593,3.533955820919453,3.533955820919453,3.5009589591958132,3.406877546359002,3.195581219716342,2.9339276249083492,2.5826344268792862,2.295768533098061,2.020451665309302,1.829777216671837,1.65112345651123,1.5282501896407668,1.4416565395276553,1.4055195579056272,1.3517306702516978,1.2887278260231532,1.1384017297064628,0.954800588849201,0.778717687088839,0.5859061867214759,0.3997605919084737,0.3819227050240508,0.31187276857995916,0.31187276857995916,0.34709887080328294,0.4546772436613271,1.16573970195582,1.9982039185634204,2.9260106728419433,3.5375384888100245,3.931736953862835,3.5090684922750066,2.8449426652599534,1.9171264724756574,1.1222067259157145,0.42321433806553577,0.35769019063540664],[0,0.347255215744805,0.33449687434737885,0.3182222056179864,0.31487276590878754,0.38409054467673154,0.5628722798528194,0.8356165291512974,1.1723166591531107,1.509878312331248,1.9052214253850026,2.2090764596215684,2.5222408566072843,2.7526526639246436,2.880975024536361,2.9708785932935786,2.970878593293578,2.947998152112329,2.866044946065271,2.699635378458014,2.4467833730856743,2.1454765214348015,1.8088826146386634,1.5191674660235177,1.2524429626908355,1.0522259437302415,0.9371952742583822,0.8631624458029497,0.844880156620879,0.8212259943560396,0.7768950625668951,0.7082275085960932,0.6110424277411151,0.4968382664204001,0.4463253789425652,0.3172809225367297,0.31166180374418695,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3708448144064691,0.7505884550155333,1.392170511386625,2.1524877328330954,2.6119550191497294,2.9783531891650297,2.670439517277361,2.2067298796460513,1.4210592378334246,1.0111186494492703,0.36043051593497233,0.3388249671257748],[0,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3054550896266981,0.3148712435698684,0.4540407295106028,0.6316085788783501,0.9041595230096384,1.1911310432502193,1.5021630733473954,1.7769319049526706,2.0252181737820694,2.223435641426827,2.3318455602955117,2.396487564837568,2.3964875648375674,2.3745154932416943,2.309126164216474,2.1588189376295683,1.9601546601156603,1.682838001745851,1.4003596887830505,1.0884504346127735,0.823827322661306,0.5685439772858574,0.46065673736925716,0.3916995154100349,0.40115130556990297,0.39252636759843074,0.37440592767240477,0.3385361064700374,0.31218726171562383,0.302717543872282,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.5410742132198447,0.8469659573226722,1.370497757404731,1.6879783153408612,1.9295030253807235,1.676988125782698,1.3571177142869433,0.8291985095773526,0.5337448153736462,0.30000000000000004,0.30000000000000004],[0,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.3054372546598365,0.3336067470627535,0.4662154920795267,0.6300539883950322,0.8536232228906211,1.1146387164418325,1.3133249580236734,1.5370730629401772,1.6840392334568484,1.7873611573282435,1.8482843820189312,1.8482843820189312,1.828343438387228,1.7693543168155093,1.6580929731060745,1.487042107424735,1.2899706467769556,1.043971505557652,0.8148650533833204,0.6305628514253419,0.427300763945224,0.3992654404125424,0.3326513974529035,0.33536170830168666,0.33818318361959654,0.3273249900064459,0.3273249900064459,0.30547531009126483,0.30273544638473315,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.30000000000000004,0.4686781726769824,0.6554937050714271,0.864176811418981,1.0332783432974209,0.9525319195964437,0.7814893664704103,0.5774695247506163,0.4460610106688674,0.30000000000000004,0.30000000000000004]]

    this.setFloor()
    this.updateShader()
    this.setPhysic()
    this.createParticle()
  }
  setFloor() {
    // this.floor = new Mesh(
    //   new BoxBufferGeometry(200, 200, 0.1, 1, 1, 1),
    //   new MeshLambertMaterial({ color: 0x959595 })
    // )
    // this.floor.rotateX(-Math.PI / 2)
    // this.floor.receiveShadow = true
    this.floor = this.assets.models.terrain.scene
    this.floor.position.y = 0.3

    this.floor.traverse((child)=> {
      if(child.name.includes("Cylinder") || child.name.includes("Cube")) {
          child.castShadow = true
      }
      if(child.name === "Plane") {
          child.receiveShadow = true
      }
  })

    console.log(this.floor.children);

    this.floor.children[57].material.onBeforeCompile = shader => {
      shader.vertexShader = shader.vertexShader.replace(
        `#include <fog_pars_vertex>`,
        fogParsVert
      )
      shader.vertexShader = shader.vertexShader.replace(
        `#include <fog_vertex>`,
        fogVert
      )
      shader.fragmentShader = shader.fragmentShader.replace(
        `#include <fog_pars_fragment>`,
        fogParsFrag
      )
      shader.fragmentShader = shader.fragmentShader.replace(
        `#include <fog_fragment>`,
        fogFrag
      )
  
      const uniforms = ({
        fogNearColor: { value: new Color(this.params.fogNearColor) },
        fogNoiseFreq: { value: this.params.fogNoiseFreq },
        fogNoiseSpeed: { value: this.params.fogNoiseSpeed },
        fogNoiseImpact: { value: this.params.fogNoiseImpact },
        time: { value: 0 }
      });
  
      shader.uniforms = UniformsUtils.merge([shader.uniforms, uniforms])
      this.terrainShader = shader
  }
    // this.floor.scale.set(0.2, 0.2, 0.2)
    this.container.add(this.floor)
  }

  createParticle() {
    this.particle = new Flare({
      time: this.time,
      assets: this.assets
    })
    this.container.add(this.particle.container)
  }

  updateShader() {
    this.time.on('tick', ()=>{
        if(this.terrainShader) {
            this.terrainShader.uniforms.time.value += 0.1
          }
    })
  }
  setPhysic() {
    this.size = new Vector3()
    this.center = new Vector3()
    this.calcBox = new Box3().setFromObject(this.container)

    this.calcBox.getSize(this.size)
    this.size.x *= 0.5
    this.size.y *= 0.5
    this.size.z *= 0.5
    this.calcBox.getCenter(this.center)

    this.box = new Box(new Vec3().copy(this.size))


    async function generateHeightfieldFromMesh(mesh/*: Mesh*/, pointDistance/*: number*/, physic) {
      // https://threejs.org/docs/index.html#api/en/core/Raycaster
      const rayCaster = new Raycaster();
      const rayCasterPosition = new Vector3();
      const upAxis = new Vector3(0, 1, 0);
  
      const heightMap = [];
  
      const geometry = mesh.geometry;
      geometry.computeBoundingBox();
      const {
          min: {x: minX, y: minY, z: minZ},
          max: {x: maxX, z: maxZ},
      } = geometry.boundingBox;
      // console.log(minX, maxZ);
  
      const width = maxX - minX;
      const length = maxZ - minZ;
  
      const totalX = width / pointDistance + 1;
      const totalZ = length / pointDistance + 1;
      const totalSteps = totalX * totalZ;
      let currentStep = 0;
  
      for (let x = minX; x <= maxX; x += pointDistance) {
          const heightDataRow = [];
          heightMap.push(heightDataRow);
  
          for (let z = maxZ; z >= minZ; z -= pointDistance) {
              rayCasterPosition.set(x, minY, z);
              rayCaster.set(rayCasterPosition, upAxis);
  
              const y = await calculateMeshSurfaceDistanceByRayCast();
  
              heightDataRow.push(y);
          }
      }
      // console.log(JSON.stringify(heightMap));
      const terrainShape = new Heightfield(heightMap, {elementSize: pointDistance});
      const heightfield = new Body({ mass: 0, shape: terrainShape });
      heightfield.quaternion.setFromAxisAngle(new Vec3(1, 0, 0), -Math.PI / 2);
      heightfield.position.set(minX, 0, maxZ);

      // console.log(heightfield);
  
      physic.world.addBody(heightfield)
  
      
      function calculateMeshSurfaceDistanceByRayCast() {
          return new Promise((resolve) => {
              window.setTimeout(() => {
                  currentStep++;
  
                  console.log(`generating height field... ${Math.floor(100 / totalSteps * currentStep)}%`);
  
                  const [result] = rayCaster.intersectObject(mesh, true);
                  if(result) resolve(result.distance);
                  else resolve(0)
              });
          });
      }
  }


    this.floor.traverse( (child) => {
      if(child.name === 'Plane') {
        // generateHeightfieldFromMesh(child, 5, this.physic)
        this.shape = new Heightfield(this.data, {elementSize: 5})
        // console.log(this.physic.ground_ground_cm);
        const heightfield = new Body({ mass: 0, shape: this.shape, material: this.physic.groundMaterial, allowSleep: false });
        heightfield.quaternion.setFromAxisAngle(new Vec3(1, 0, 0), -Math.PI / 2);
        heightfield.position.set(-128.95469665527344, 0, 129.0102081298828);
        this.physic.world.addBody(heightfield)

        // console.log(child);
        // const ok = new ConvexHull().setFromObject(child)
        // let p = []

        // ok.vertices.forEach((vert) => {
        //   p.push(vert.point)
        // })

        // const geometry = new ConvexGeometry(p) // create a convex geometry 
        // console.log(geometry);
        // let points = [], // array of Cannon Vec3
        //     faces = [] // array of array of faces see below

        // points = geometry.vertices.map(function (v) {
        //     return new Vec3(v.x, v.y, v.z)
        // })

        // faces = geometry.faces.map(function (f) {
        //     return [f.a, f.b, f.c]
        // })


        // this.shape = threeToCannon(ok, {
        //   type: threeToCannon.Type.HULL,
        // })

        // this.shape = new ConvexPolyhedron({ vertices: points, faces: faces })
        // console.log(child.geometry.attributes.position.array);
        // this.shape = new Heightfield(child.geometry.attributes.position.array)
        // console.log(points);
      }
    })
    
    
  }
}
